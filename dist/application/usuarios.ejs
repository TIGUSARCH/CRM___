<!DOCTYPE html>
<html lang="en">
<!-- [Head] start -->

<head>
  <title>Customer List | Able Pro Dashboard Template</title>
  <!-- [Meta] -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- [Favicon] icon -->
  <link rel="icon" href="../assets/images/favicon.svg" type="image/x-icon"> <!-- [Font] Family -->
<link rel="stylesheet" href="../assets/fonts/inter/inter.css" id="main-font-link" />
<!-- [Tabler Icons] https://tablericons.com -->
<link rel="stylesheet" href="../assets/fonts/tabler-icons.min.css" >
<!-- [Feather Icons] https://feathericons.com -->
<link rel="stylesheet" href="../assets/fonts/feather.css" >
<!-- [Font Awesome Icons] https://fontawesome.com/icons -->
<link rel="stylesheet" href="../assets/fonts/fontawesome.css" >
<!-- [Material Icons] https://fonts.google.com/icons -->
<link rel="stylesheet" href="../assets/fonts/material.css" >
<!-- [Template CSS Files] -->
<link rel="stylesheet" href="../assets/css/style.css" id="main-style-link" >
<link rel="stylesheet" href="../assets/css/style-preset.css" >
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/izitoast/dist/css/iziToast.min.css">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-14K1GBX9FG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'G-14K1GBX9FG');
</script>
<!-- WiserNotify -->
<script>
  !(function () {
    if (window.t4hto4) console.log('WiserNotify pixel installed multiple time in this page');
    else {
      window.t4hto4 = !0;
      var t = document,
        e = window,
        n = function () {
          var e = t.createElement('script');
          (e.type = 'text/javascript'),
            (e.async = !0),
            (e.src = 'https://pt.wisernotify.com/pixel.js?ti=1jclj6jkfc4hhry'),
            document.body.appendChild(e);
        };
      'complete' === t.readyState ? n() : window.attachEvent ? e.attachEvent('onload', n) : e.addEventListener('load', n, !1);
    }
  })();
</script>
<!-- Microsoft clarity -->
<script type="text/javascript">
  (function (c, l, a, r, i, t, y) {
    c[a] =
      c[a] ||
      function () {
        (c[a].q = c[a].q || []).push(arguments);
      };
    t = l.createElement(r);
    t.async = 1;
    t.src = 'https://www.clarity.ms/tag/' + i;
    y = l.getElementsByTagName(r)[0];
    y.parentNode.insertBefore(t, y);
  })(window, document, 'clarity', 'script', 'gkn6wuhrtb');
</script>

</head>
<!-- [Head] end -->
<!-- [Body] Start -->

<body data-pc-preset="preset-9" data-pc-sidebar-caption="true" data-pc-direction="ltr" data-pc-theme_contrast="" data-pc-theme="light">
  <!-- [ Pre-loader ] start -->
<div class="loader-bg">
  <div class="loader-track">
    <div class="loader-fill"></div>
  </div>
</div>
<!-- [ Pre-loader ] End -->
 <!-- [ Sidebar Menu ] start -->
<%- include('navbar')%>
<!-- [ Sidebar Menu ] end --> <!-- [ Header Topbar ] start -->
<%- include('header')%>
<!-- [ Header ] end -->



  <!-- [ Main Content ] start -->
  <div class="pc-container">
    <div class="pc-content">
      <!-- [ breadcrumb ] start -->
      <div class="page-header">
        <div class="page-block">
          <div class="row align-items-center">
            <div class="col-md-12">
              <ul class="breadcrumb">
                <li class="breadcrumb-item"><a href="../dashboard/index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="javascript: void(0)">Customer</a></li>
                <li class="breadcrumb-item" aria-current="page">List</li>
              </ul>
            </div>
            <div class="col-md-12">
              <div class="page-header-title">
                <h2 class="mb-0">Gesti√≥n de usuarios
                </h2>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- [ breadcrumb ] end -->

      <!-- [ Main Content ] start -->
      <div class="row">
        <!-- [ sample-page ] start -->
        <div class="col-sm-12">
          <div class="card table-card">
            <div class="card-body">
              <div class="text-end p-4 pb-sm-2">
                <a href="#" class="btn btn-primary d-inline-flex align-item-center" data-bs-toggle="modal" data-bs-target="#customer_add-modal">
                  <i class="ti ti-plus f-18"></i> Agregar usuarios
                </a>
              </div>
              <div class="table-responsive">
                <table class="table table-hover" id="pc-dt-simple">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Nombre</th>
                      <th>apellidoPaterno</th>
                      <th>apellidoMaterno</th>
                      <th>Telefono</th>
                      <th>Correo</th>
                      <th class="text-center">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="lista-clientes">

                    <!-- esto se va a lle con registros de la bd -->
                    <tr>
                      <td>179</td>
                      <td>
                        <div class="row">
                          <div class="col-auto">
                            <img src="../assets/images/user/avatar-1.jpg" alt="user-image"
                              class="wid-40 rounded-circle">
                          </div>
                          <div class="col">
                            <h6 class="mb-0">Addie Bass</h6>
                            <p class="text-muted f-12 mb-0">mareva@gmail.com</p>
                          </div>
                        </div>
                      </td>
                      <td>+1 (247) 849-6968</td>
                      <td>45</td>
                      <td>$7,634 </td>
                      <td><span class="badge bg-light-success rounded-pill f-12">Relationship</span> </td>
                      <td class="text-center">
                        <ul class="list-inline me-auto mb-0">
                          <li class="list-inline-item align-bottom" data-bs-toggle="tooltip" title="View">
                            <a href="#" class="avtar avtar-xs btn-link-secondary btn-pc-default" data-bs-toggle="modal"
                              data-bs-target="#customer-modal">
                              <i class="ti ti-eye f-18"></i>
                            </a>
                          </li>
                          <li class="list-inline-item align-bottom" data-bs-toggle="tooltip" title="Edit">
                            <a href="#" class="avtar avtar-xs btn-link-success btn-pc-default" data-bs-toggle="modal"
                              data-bs-target="#customer-edit_add-modal">
                              <i class="ti ti-edit-circle f-18"></i>
                            </a>
                          </li>
                          <li class="list-inline-item align-bottom" data-bs-toggle="tooltip" title="Delete">
                            <a href="#" class="avtar avtar-xs btn-link-danger btn-pc-default">
                              <i class="ti ti-trash f-18"></i>
                            </a>
                          </li>
                        </ul>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <!-- [ sample-page ] end -->
      </div>
      <!-- [ Main Content ] end -->
    </div>
  </div>
  <!-- show detail cliente -->
  <div class="modal fade" id="customer-modal" data-bs-keyboard="false" tabindex="-1" 
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header border-0 pb-0">
          <h5 class="mb-0">Detalles del cliente</h5>
          <a href="#" class="avtar avtar-s btn-link-danger btn-pc-default" data-bs-dismiss="modal">
            <i class="ti ti-x f-20"></i>
          </a>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-lg-4">
              <div class="card">
                <div class="card-body position-relative">
                  <div class="text-center mt-3">
                    <div class="chat-avtar d-inline-flex mx-auto">
                      <img class="rounded-circle img-fluid wid-70" src="../assets/images/logo-dark.jpg"
                      alt="User image">
                    </div>
                    <h5 id="view-rol">Aaron Poole</h5>
                    <p class="text-muted text-sm" id="view-id">Manufacturing Director</p>
                    <hr class="my-3 border border-secondary-subtle">

                    <hr class="my-3 border border-secondary-subtle">
                    <div class="d-inline-flex align-items-center justify-content-between w-100 mb-3">
                      <i class="ti ti-mail"></i>
                      <p class="mb-0" id="view-correoElectronico"></p>
                    </div>
                    <div class="d-inline-flex align-items-center justify-content-between w-100 mb-3">
                      <i class="ti ti-phone"></i>
                      <p class="mb-0" id="view-telefono"></p>
                    </div>
                    <div class="d-inline-flex align-items-center justify-content-between w-100 mb-3">
                      <button id="send_message" type="button" class="btn btn-success"> <i class="fab fa-whatsapp"></i> Abrir chat </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-8">
              <div class="card">
                <div class="card-header">
                  <h5>Personal Details</h5>
                </div>
                <div class="card-body">
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item px-0 pt-0">
                      <div class="row">
                        <div class="col-md-6">
                          <p class="mb-1 text-muted">Nombre</p>
                          <h6 class="mb-0" id="view-nombre"> </h6>
                        </div>
                        <div class="col-md-6">
                          <p class="mb-1 text-muted">Apellido Paterno</p>
                          <h6 class="mb-0" id="view-apellidoPaterno"> </h6>
                        </div>
                        
                      </div>
                    </li>
                    <li class="list-group-item px-0">
                      <div class="row">
                        <div class="col-md-6">
                          <p class="mb-1 text-muted">Apellido Materno</p>
                          <h6 class="mb-0" id="view-apellidoMaterno"> </h6>
                        </div>
                    </li>
                  </ul>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- add cliente  -->
  <div class="modal fade" id="customer_add-modal" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="mb-0"> Agregar usuario</h5>
          <a href="#" class="avtar avtar-s btn-link-danger btn-pc-default" data-bs-dismiss="modal">
            <i class="ti ti-x f-20"></i>
          </a>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-sm-3 text-center">
              <div class="chat-avtar d-inline-flex mx-auto">
                <img class="rounded-circle img-fluid wid-70" src="../assets/images/logo-dark.jpg"
                  alt="User image">
              </div>
            </div>
            <div class="col-sm-9">
              <div class="form-group">
                <label class="form-label">Nombre</label>
                <input id="aCliNombre" type="text" class="form-control" placeholder="Ingrese el nombre">
              </div>
              <div class="form-group">
                <label class="form-label">Apellido Paterno</label>
                <input id="aCliPaterno" type="text" class="form-control" placeholder="Ingrese el apellido paterno  ">
              </div>
              <div class="form-group">
                <label class="form-label">Apellido Materno</label>
                <input id="aCliMaterno" type="text" class="form-control" placeholder="Ingrese el apellido materno ">
              </div>
              <div class="form-group">
                <label class="form-label">Tel√©fono</label>
                <input id="aCliTelefono" type="text" class="form-control" placeholder="Ingrese el tel√©fono ">
              </div>
              <div class="form-group">
                <label class="form-label">Correo electr√≥nico</label>
                <input id="aCliCorreo" type="text" class="form-control" placeholder="Ingrese el correo electr√≥nico">
              </div>
              <div class="form-group">
                <label class="form-label">Contrase√±a</label>
                <input id="password" name="password" type="password" class="form-control" placeholder="Contrase√±a" >
              </div>
              <div class="form-group">
                <label class="form-label">Rol del usuario</label>
                <select id="rolId" name="rolId" class="form-select">
                  <option value="" selected disabled>Selecciona un rol</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer justify-content-between">
          <ul class="list-inline me-auto mb-0">
            <li class="list-inline-item align-bottom">
              <a href="#" class="avtar avtar-s btn-link-danger btn-pc-default w-sm-auto" data-bs-toggle="tooltip" title="Delete">
                <i class="ti ti-trash f-18"></i>
              </a>
            </li>
          </ul>
          <div class="flex-grow-1 text-end">
            <button type="button" class="btn btn-link-danger btn-pc-default" data-bs-dismiss="modal">Cancel</button>
            <button id="btnAddCliente" type="button" class="btn btn-primary" data-bs-dismiss="modal">Save</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
   <!-- edit cliente -->
<!-- Modal para editar cliente -->
<div class="modal fade" id="customer-edit_add-modal" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="mb-0">Editar Clientes</h5>
        <a href="#" class="avtar avtar-s btn-link-danger btn-pc-default" data-bs-dismiss="modal">
          <i class="ti ti-x f-20"></i>
        </a>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-3 text-center">
            <div class="chat-avtar d-inline-flex mx-auto">
              <img class="rounded-circle img-fluid wid-70" src="../assets/images/logo-dark.jpg"
                alt="User image">
            </div>
          </div>
          <div class="col-sm-9">
            <!-- cambiar a hidden -->
            <input type="hidden" id="edit-id">
            <div class="form-group">
              <label class="form-label">Nombre</label>
              <input id="edit-nombre" type="text" class="form-control" placeholder="Ingrese el nombre">
            </div>
            <div class="form-group">
              <label class="form-label">Apellido Paterno</label>
              <input id="edit-apellidoPaterno" type="text" class="form-control" placeholder="Ingrese el apellido paterno  ">
            </div>
            <div class="form-group">
              <label class="form-label">Apellido Materno</label>
              <input id="edit-apellidoMaterno" type="text" class="form-control" placeholder="Ingrese el apellido materno ">
            </div>
            <div class="form-group">
              <label class="form-label">Tel√©fono</label>
              <input id="edit-telefono" type="text" class="form-control" placeholder="Ingrese el tel√©fono ">
            </div>
            <div class="form-group">
              <label class="form-label">Correo electr√≥nico</label>
              <input id="edit-correoElectronico" type="text" class="form-control" placeholder="Ingrese el correo electr√≥nico">
            </div>
            <div class="form-group">
              <label class="form-label">Contrase√±a</label>
              <input id="password1" name="password" type="password" class="form-control" placeholder="Contrase√±a" >
            </div>
            <div class="form-group">
              <label class="form-label">Rol del usuario</label>
              <select id="rolId1" name="rolId" class="form-select">
                <option value="" selected disabled>Selecciona un rol</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer justify-content-between">
        <ul class="list-inline me-auto mb-0">
          <li class="list-inline-item align-bottom">
            <a href="#" class="avtar avtar-s btn-link-danger btn-pc-default w-sm-auto" data-bs-toggle="tooltip" title="Delete">
              <i class="ti ti-trash f-18"></i>
            </a>
          </li>
        </ul>
        <div class="flex-grow-1 text-end">
          <button type="button" class="btn btn-link-danger btn-pc-default" data-bs-dismiss="modal">Cancel</button>
          <button id="btnEditCliente" type="button" class="btn btn-primary" data-bs-dismiss="modal">Save</button>
        </div>
      </div>
    </div>
  </div>
</div>
  <!-- [ Main Content ] end -->
  <%- include('footer')%>
   <!-- Required Js -->
<script src="../assets/js/plugins/popper.min.js"></script>
<script src="../assets/js/plugins/simplebar.min.js"></script>
<script src="../assets/js/plugins/bootstrap.min.js"></script>
<script src="../assets/js/fonts/custom-font.js"></script>
<script src="../assets/js/pcoded.js"></script>
<script src="../assets/js/plugins/feather.min.js"></script>





<script>layout_change_default();</script>
<script>layout_theme_contrast_change('false');</script>
<script>change_box_container('false');</script>
<script>layout_caption_change('true');</script>
<script>layout_rtl_change('false');</script>
<script>preset_change("preset-9");</script>
<script src="https://cdn.jsdelivr.net/npm/izitoast/dist/js/iziToast.min.js"></script>
  <!-- [Page Specific JS] start -->
  <script src="../assets/js/plugins/simple-datatables.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function(event) {
      const tableBody = document.querySelector('#pc-dt-simple');
    
      async function fetchClientes() {
          try {
              const response = await fetch('/usuarios');
              const data = await response.json();
              console.log(data);

              if (!data.data.length) {
                  return;
              }
  
              // Create the table using simpleDatatables.DataTable
              let table = new simpleDatatables.DataTable(tableBody, {
                  data: {
                      headings: [
                          "No.", "Nombre", "Apellido Paterno", "Apellido Materno", 
                          "Tel√©fono", "Correo Electr√≥nico", "Rol", "Acciones"
                      ],
                      data: data.data.map((usuario, i) => [
                          i + 1,
                          usuario.nombre,
                          usuario.apellidoPaterno,
                          usuario.apellidoMaterno,
                          usuario.telefono,
                          usuario.correoElectronico,
                          usuario.Rol.tipo,
                          `<ul class="list-inline me-auto mb-0">
                              <li class="list-inline-item align-bottom" data-bs-toggle="tooltip" title="View">
                                <a href="#" class="avtar avtar-xs btn-link-secondary btn-pc-default" data-bs-toggle="modal"
                                  data-bs-target="#customer-modal" data-id="${usuario.id}">
                                  <i class="ti ti-eye f-18"></i>
                              </a>
                              </li>
                              <li class="list-inline-item align-bottom" data-bs-toggle="tooltip" title="Edit">
                                <a href="#" class="avtar avtar-xs btn-link-success btn-pc-default" data-bs-toggle="modal"
                                  data-bs-target="#customer-edit_add-modal" data-id="${usuario.id}">
                                  <i class="ti ti-edit-circle f-18"></i>
                              </a>
                              </li>
                              <li class="list-inline-item align-bottom" data-bs-toggle="tooltip" title="Delete">
                                <a href="#" class="avtar avtar-xs btn-link-danger btn-pc-default" data-id="${usuario.id}">
                                  <i class="ti ti-trash f-18"></i>
                                </a>
                              </li>
                            </ul>`
                      ])
                  }
              });
  
              // Initialize tooltips again
              const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
              tooltipTriggerList.map(function (tooltipTriggerEl) {
                  return new bootstrap.Tooltip(tooltipTriggerEl);
              });
  
          } catch (error) {
              console.error('Error fetching clients:', error);
              alert('No se han podido cargar los datos a la tabla');
          }
      }
  
      tableBody.addEventListener('click', async function(event) {
          const target = event.target.closest('a');
          if (!target) return;
  
          const usuarioId = target.getAttribute('data-id');
          if (target.dataset.bsTarget === '#customer-modal') {
              console.log(usuarioId);
              try {
                const response = await fetch(`/usuarios/${usuarioId}`);
                const data = await response.json();
                document.getElementById('view-rol').innerText = data.Rol.tipo;
                document.getElementById('view-id').innerText = data.id;
                document.getElementById('view-nombre').innerText = data.nombre;
                document.getElementById('view-apellidoPaterno').innerText = data.apellidoPaterno;
                document.getElementById('view-apellidoMaterno').innerText = data.apellidoMaterno;
                document.getElementById('view-telefono').innerText = data.telefono;
                document.getElementById('view-correoElectronico').innerText = data.correoElectronico;
                <!-- viewModal.show(); -->
            } catch (error) {
                console.error('Error fetching client details:', error);
                alert('Ocurrio un error al obtener los datos del clientes.');
            }
          } else if (target.dataset.bsTarget === '#customer-edit_add-modal') {
              // Handle edit action, e.g., prefill form with client details
              try {
                const response = await fetch(`/usuarios/${usuarioId}`);
                const data = await response.json();
                document.getElementById('edit-id').value = data.id;
                document.getElementById('edit-nombre').value = data.nombre;
                document.getElementById('edit-apellidoPaterno').value = data.apellidoPaterno;
                document.getElementById('edit-apellidoMaterno').value = data.apellidoMaterno;
                document.getElementById('edit-telefono').value = data.telefono;
                document.getElementById('edit-correoElectronico').value = data.correoElectronico;
                document.getElementById('password1').value = data.password;
                document.getElementById('rolId1').value = data.rolId;
            } catch (error) {
                console.error('Error fetching client details:', error);
                alert('Error al obtener los datos del cliente');
            }
              console.log(usuarioId);
          } else if (target.querySelector('.ti-trash')) {
              // Handle delete action, e.g., show confirmation dialog
              if (confirm('¬øEst√°s seguro de que deseas eliminar este cliente?')) {
                try {
                    const response = await fetch(`/usuarios/${usuarioId}`, {
                        method: 'DELETE'
                    });
                    if (response.ok) {
                        // Remove the row from the table
                        target.closest('tr').remove();
                        alert('Cliente eliminado correctamente.');
                    } else {
                        alert('Error al eliminar el cliente.');
                    }
                } catch (error) {
                    console.error('Error deleting client:', error);
                    alert('An error occurred while deleting the client.');
                }
            }
              console.log(usuarioId);
          }
      });
      document.getElementById('btnAddCliente').addEventListener('click', async function() {
        const nombre = document.getElementById('aCliNombre').value;
        const apellidoPaterno = document.getElementById('aCliPaterno').value;
        const apellidoMaterno = document.getElementById('aCliMaterno').value;
        const telefono = document.getElementById('aCliTelefono').value;
        const correoElectronico = document.getElementById('aCliCorreo').value;
        const imagen = "image"
        const password = document.getElementById('password').value;
        const rolId = document.getElementById('rolId').value;
        const data = {
            nombre: nombre,
            apellidoPaterno: apellidoPaterno,
            apellidoMaterno: apellidoMaterno,
            telefono: telefono,
            imagen: imagen,
            correoElectronico: correoElectronico,
            contrasena: password,
            rolId: rolId
        };
        console.log(data);
        try {
            const response = await fetch('/usuarios', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });
            
            const responseData = await response.json();

            console.log(responseData);

            if (response.ok) {
                // Mostrar un mensaje de √©xito, cerrar el modal, etc.
                fetchClientes();
                iziToast.success({
                  title: '√âxito',
                  message: 'Se guardo correctamente',
                  position: 'topRight'
                });  
            } else if (response.status === 409) {
              iziToast.warning({
                title: 'Cuidado',
                message: 'Ese correo ya lo usa otro cliente',
                position: 'topRight'
              });
            } else if (response.status === 400) {
              iziToast.warning({
                title: 'Cuidado',
                message: 'Debes llenar todos los campos',
                position: 'topRight'
              });
          } else {
                // Mostrar un mensaje de error, etc.
                console.error('Error al guardar el cliente');
            }
        } catch (error) {
            console.error('Error:', error);
        }
      });
  
      document.getElementById('btnEditCliente').addEventListener('click', async function() {
        const id = document.getElementById('edit-id').value
        const nombre = document.getElementById('edit-nombre').value;
        const apellidoPaterno = document.getElementById('edit-apellidoPaterno').value;
        const apellidoMaterno = document.getElementById('edit-apellidoMaterno').value;
        const telefono = document.getElementById('edit-telefono').value;
        const correoElectronico = document.getElementById('edit-correoElectronico').value;
        const imagen = "image"
        const password = document.getElementById('password').value;
        const rolId = document.getElementById('rolId1').value;
        const data = {
            nombre: nombre,
            apellidoPaterno: apellidoPaterno,
            apellidoMaterno: apellidoMaterno,
            telefono: telefono,
            imagen: imagen,
            correoElectronico: correoElectronico,
            contrasena: password,
            rolId: rolId
        };
        
        try {
            console.log(id)
            const response = await fetch(`/usuarios/${id}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });
            
            const responseData = await response.json();

            console.log(responseData);

            if (responseData) {
                // Mostrar un mensaje de √©xito, cerrar el modal, etc.
                fetchClientes();
                console.log('Cliente actualizado exitosamente');
                
            } else {
                // Mostrar un mensaje de error, etc.
                console.error('Error al guardar el cliente');
            }
        } catch (error) {
            console.error('Error:', error);
        }
      });
  
      fetchClientes(); 

    
    const selectElement = document.getElementById('rolId');
    const selectElement1 = document.getElementById('rolId1');
    // Funci√≥n para obtener datos de la API
    const fetchData = async () => {
        try {
            const response = await fetch('/roles'); // Reemplaza con tu URL de la API
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const data = await response.json();
            fillSelect(data);
            fillSelect1(data);
        } catch (error) {
            console.error('Error fetching data:', error);
        }
    };
    
    // Funci√≥n para llenar el select con los datos obtenidos
    const fillSelect = (data) => {
        data.forEach(item => {
            const option = document.createElement('option');
            option.value = item.id; // Asigna el valor seg√∫n tu estructura de datos
            option.textContent = item.tipo; // Asigna el texto seg√∫n tu estructura de datos
            selectElement.appendChild(option);
        });
    };

    const fillSelect1 = (data) => {
      data.forEach(item => {
          const option = document.createElement('option');
          option.value = item.id; // Asigna el valor seg√∫n tu estructura de datos
          option.textContent = item.tipo; // Asigna el texto seg√∫n tu estructura de datos
          selectElement1.appendChild(option);
      });
  };
    fetchData();
  });


  document.getElementById('send_message').addEventListener('click',function(){

    var nombre = document.getElementById('view-nombre').textContent;
    var telefono = document.getElementById('view-telefono').textContent;
    var message = "Hola " + nombre + "buen dia";
    var url = "whatsapp://send?text="+encodeURIComponent(message)+"&phone="+encodeURIComponent(telefono)
    console.log(telefono, message);
    window.open(url);
    
  });

   </script>

  <!-- [Page Specific JS] end -->
</body>
<!-- [Body] end -->

</html>